# 客户端的重连与恢复

>主要针对客户端的暂时掉线，以及客户端长时间离线的处理，不同类型的游戏，处理方式也不同。
分为主动重连，心跳离线，主动离线

## 主动重连

>client短时间断开，并快速的重连。初步的解题思路是：client存储bootEntityId和clientId，并在首次连接时，存入请求header。

>服务端收到后，在gate查询clientId缓存，如果不存在，则认为已经清理过，走标准连接流程，create boot entity -> enter nil space -> enter target space,并通知客户端新的clientId和bootEntiyId,客户端如果有缓存，则需要更新clientId 

> 服务端存在缓存，新的conn赋予clientProxy，通知客户端重连成功。客户端根据业务逻辑定制拉取缓存的策略，如果是默认策略，则gate把block的消息，一股脑推送过来。


